(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{V1YL:function(e,t,n){"use strict";n.r(t),n.d(t,"UserModule",(function(){return I}));var o=n("hGdz"),i=n("tyNb"),c=n("fXoL"),r=n("3Pt+"),a=n("6E1o"),s=n("HDdC");const u=e=>{const t=e.value,n=new FileReader;return s.a.create(e=>{n.addEventListener("loadend",()=>{const t=new Uint8Array(n.result).subarray(0,4);let o="",i=!1;for(let e=0;e<t.length;e++)o+=t[e].toString(16);switch(o){case"89504e47":i=!0;break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":i=!0;break;default:i=!1}e.next(i?null:{invalidMimeType:!0}),e.complete()}),n.readAsArrayBuffer(t)})};var l=n("3now"),b=n("0IaG"),d=n("dNgK"),m=n("ofXK"),g=n("NFeN"),p=n("bTqV"),f=n("b/j1");function h(e,t){if(1&e){const e=c.Ub();c.Tb(0,"button",15),c.ac("click",(function(){return c.uc(e),c.ec(2).onStartEdit()})),c.Tb(1,"mat-icon"),c.Ec(2,"edit"),c.Sb(),c.Sb()}}function w(e,t){if(1&e&&(c.Tb(0,"div",23),c.Ob(1,"img",24),c.Sb()),2&e){const e=c.ec(3);c.Ab(1),c.kc("src",e.imagePreview,c.wc)("alt","User Photo")}}function S(e,t){if(1&e){const e=c.Ub();c.Tb(0,"div"),c.Tb(1,"button",16),c.ac("click",(function(){return c.uc(e),c.qc(8).click()})),c.Ec(2,"Select Photo"),c.Sb(),c.Tb(3,"button",17),c.ac("click",(function(){return c.uc(e),c.ec(2).onCancelEdit()})),c.Ec(4,"Cancel"),c.Sb(),c.Cc(5,w,2,2,"div",18),c.Tb(6,"form",19),c.ac("ngSubmit",(function(){return c.uc(e),c.ec(2).onImageSave()})),c.Tb(7,"input",20,21),c.ac("change",(function(t){return c.uc(e),c.ec(2).onImagePicked(t)})),c.Sb(),c.Tb(9,"button",22),c.Ec(10,"submit"),c.Sb(),c.Sb(),c.Sb()}if(2&e){const e=c.ec(2);c.Ab(5),c.kc("ngIf",e.imagePreview&&""!=e.imagePreview&&e.imageForm.get("photo").valid),c.Ab(1),c.kc("formGroup",e.imageForm),c.Ab(3),c.kc("disabled",!e.imageForm.valid)}}function v(e,t){1&e&&(c.Tb(0,"div",25),c.Tb(1,"h6",26),c.Ec(2,"Please activate your account by clicking on the link sent to the email address you provided during sign up. Until then, you can only see the About and ToS pages. Hurry up, the link will expire after 24 hours"),c.Sb(),c.Sb())}function y(e,t){if(1&e){const e=c.Ub();c.Tb(0,"ul",27),c.Tb(1,"li",28),c.Ec(2," Share your Recruitment link with your friends so they can join and you get upgrade: "),c.Sb(),c.Tb(3,"li",29),c.Ec(4," Get 50 users to signup to get Pro account forever "),c.Sb(),c.Tb(5,"li",30),c.Tb(6,"span",31),c.Ec(7,"Recruitment link:"),c.Sb(),c.Tb(8,"code"),c.Ec(9),c.Sb(),c.Tb(10,"mat-icon",32),c.ac("click",(function(){c.uc(e);const t=c.ec(2);return t.copyText(t.recruitmentLink+t.user.username)})),c.Ec(11,"content_copy"),c.Sb(),c.Sb(),c.Tb(12,"li",33),c.Tb(13,"span",31),c.Ec(14),c.Sb(),c.Ec(15,"users signed up with your link "),c.Sb(),c.Sb()}if(2&e){const e=c.ec(2);c.Ab(9),c.Fc(e.recruitmentLink+e.user.username),c.Ab(5),c.Fc(e.user.recruits||0)}}function k(e,t){if(1&e&&(c.Tb(0,"div",2),c.Tb(1,"div",3),c.Tb(2,"div",4),c.Cc(3,h,3,0,"button",5),c.Ob(4,"img",6),c.Cc(5,S,11,3,"div",7),c.Tb(6,"p"),c.Tb(7,"span"),c.Ec(8),c.Sb(),c.Sb(),c.Tb(9,"ul",8),c.Tb(10,"li"),c.Tb(11,"p",9),c.Tb(12,"mat-icon"),c.Ec(13,"email"),c.Sb(),c.Ec(14),c.Sb(),c.Sb(),c.Tb(15,"li"),c.Tb(16,"p",10),c.Tb(17,"mat-icon"),c.Ec(18,"account_box"),c.Sb(),c.Ec(19),c.Sb(),c.Sb(),c.Tb(20,"li"),c.Tb(21,"p",9),c.Tb(22,"mat-icon"),c.Ec(23,"watch"),c.Sb(),c.Ec(24),c.fc(25,"strToDate"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(26,"div",11),c.Tb(27,"div",12),c.Tb(28,"h3"),c.Ec(29,"User Stats"),c.Sb(),c.Cc(30,v,3,0,"div",13),c.Cc(31,y,16,2,"ul",14),c.Sb(),c.Sb(),c.Sb()),2&e){const e=c.ec();c.Ab(3),c.kc("ngIf","unconfirmed"!=e.user.role),c.Ab(1),c.kc("src",e.user.photo,c.wc)("alt",e.user.username),c.Ab(1),c.kc("ngIf",e.editMode),c.Ab(3),c.Fc(e.user.username),c.Ab(6),c.Fc(e.user.email),c.Ab(5),c.Gc("",e.user.role," "),c.Ab(5),c.Fc(c.gc(25,10,e.user.createdAt)),c.Ab(6),c.kc("ngIf","unconfirmed"==e.user.role),c.Ab(1),c.kc("ngIf","unconfirmed"!=e.user.role)}}let C=(()=>{class e{constructor(e,t,n){this.userService=e,this.dialog=t,this._snackBar=n,this.recruitmentLink=`${window.location.protocol}//${window.location.hostname}/auth/register/`,this.editMode=!1,this.imagePicked=!1,this.durationInSeconds=3}ngOnInit(){this.getMyData(),this.imageForm=new r.i({photo:new r.f(null,{validators:[r.F.required],asyncValidators:[u]})})}getMyData(){this.userService.getUser().subscribe(e=>this.user=e)}copyText(e){let t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.openSnackBar()}onStartEdit(){this.editMode=!this.editMode}onCancelEdit(){this.editMode=!1,this.imagePicked=!1,this.imageForm.patchValue({photo:null}),this.imageForm.get("photo").updateValueAndValidity()}onImagePicked(e){const t=e.target.files[0];this.imageForm.patchValue({photo:t}),this.imageForm.get("photo").updateValueAndValidity();const n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(t)}onImageSave(){this.userService.uploadPhoto(this.imageForm.value.photo).subscribe(e=>{this.user.photo="https://bwr-img.s3.eu-west-3.amazonaws.com/users/"+e.photo}),this.imagePicked=!1,this.editMode=!1,this.imageForm.reset()}openSnackBar(){this._snackBar.openFromComponent(a.a,{duration:1e3*this.durationInSeconds,data:"Link Copied"})}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(l.a),c.Nb(b.b),c.Nb(d.b))},e.\u0275cmp=c.Hb({type:e,selectors:[["ba-account"]],decls:2,vars:1,consts:[[1,"ba-content"],["class","w3-row",4,"ngIf"],[1,"w3-row"],[1,"w3-col","l4","m12","w3-container"],[1,"w3-card","w3-padding","user"],["mat-raised-button","","color","primary","class","edit",3,"click",4,"ngIf"],[1,"photo",3,"src","alt"],[4,"ngIf"],[1,"w3-ul","info"],[1,"w3-animate-right"],[1,"w3-animate-left"],[1,"w3-col","l8","m12","w3-container"],[1,"w3-card","w3-padding","user-stats"],["class","w3-panel w3-pale-red w3-border",4,"ngIf"],["class","w3-ul",4,"ngIf"],["mat-raised-button","","color","primary",1,"edit",3,"click"],["type","button","mat-stroked-button","","color","primary",1,"w3-margin",3,"click"],["type","button","mat-stroked-button","","color","accent",1,"w3-margin",3,"click"],["class","image-preview",4,"ngIf"],[1,"w3-animate-zoom",3,"formGroup","ngSubmit"],["type","file","accept","image/*",1,"file-input",3,"change"],["filePicker",""],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"image-preview"],[3,"src","alt"],[1,"w3-panel","w3-pale-red","w3-border"],[1,"w3-padding"],[1,"w3-ul"],[1,"w3-panel","w3-padding","w3-pale-green","w3-animate-left"],[1,"w3-panel","w3-padding","w3-pale-green","w3-animate-right"],[1,"w3-panel","w3-light-gray","w3-animate-right"],[1,"w3-tag","w3-pale-green","w3-padding"],["title","Copy link",3,"click"],[1,"w3-panel","w3-light-gray","w3-animate-left"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Cc(1,k,32,12,"div",1),c.Sb()),2&e&&(c.Ab(1),c.kc("ngIf",t.user))},directives:[m.t,g.a,p.b,r.H,r.s,r.j],pipes:[f.a],styles:["h3[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#54c479}p[_ngcontent-%COMP%]{color:#444;font-size:.8rem}.image-preview[_ngcontent-%COMP%]{height:10rem;width:10rem;margin:1rem auto}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.user[_ngcontent-%COMP%]{position:relative;text-align:center}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;color:#248e38}.user[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{position:relative;width:10rem;height:10rem;margin:1rem auto;border-radius:5rem;border:2px solid #afd91a;overflow:hidden}.user[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:none}.user[_ngcontent-%COMP%]:hover   .edit[_ngcontent-%COMP%]{display:block}.user-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .user-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .w3-tag[_ngcontent-%COMP%], .user-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:500}mat-icon[_ngcontent-%COMP%]{position:absolute;font-size:1rem;top:.5rem;right:1rem;cursor:pointer}.info[_ngcontent-%COMP%]{border-top:1px solid #eee}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left;position:relative;padding-left:.4rem;color:#444;margin:0}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{top:.1rem;left:-1rem;color:#54c479;font-size:1rem;cursor:not-allowed}.file-input[_ngcontent-%COMP%]{width:0;height:0;overflow:hidden}.w3-panel[_ngcontent-%COMP%]{padding:0 1rem 0 0;margin:0}.w3-panel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})(),P=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Hb({type:e,selectors:[["ba-user"]],decls:1,vars:0,template:function(e,t){1&e&&c.Ob(0,"ba-account")},directives:[C],styles:[""]}),e})();var T=n("AytR"),M=n("qXBG");function O(e,t){1&e&&(c.Tb(0,"div"),c.Tb(1,"h1"),c.Ec(2,"User confirmed successfully"),c.Sb(),c.Tb(3,"a",2),c.Ec(4,"Go To my account"),c.Sb(),c.Sb())}function _(e,t){1&e&&(c.Tb(0,"div"),c.Tb(1,"h3"),c.Ec(2,"Your account could not be confirmed. Please try again with the link we sent you"),c.Sb(),c.Sb())}const E=[{path:":token",component:(()=>{class e{constructor(e,t){this.authService=e,this.route=t,this.token=null,this.userUrl=T.a.BASE_URL+"/me",this.token=this.route.snapshot.paramMap.get("token")}ngOnInit(){this.authService.confirmUser(this.token),setTimeout(()=>{this.confirmOK=this.authService.confirmOK},1400)}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(M.a),c.Nb(i.a))},e.\u0275cmp=c.Hb({type:e,selectors:[["ba-confirm-user"]],decls:3,vars:2,consts:[[1,"ba-content"],[4,"ngIf"],["href","userUrl"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Cc(1,O,5,0,"div",1),c.Cc(2,_,3,0,"div",1),c.Sb()),2&e&&(c.Ab(1),c.kc("ngIf",t.confirmOK),c.Ab(1),c.kc("ngIf",!t.confirmOK))},directives:[m.t],styles:[""]}),e})()},{path:"",pathMatch:"full",component:P}];let A=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[i.h.forChild(E)],i.h]}),e})(),I=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[o.a,A]]}),e})()}}]);