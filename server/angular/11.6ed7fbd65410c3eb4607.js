(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{V1YL:function(e,t,n){"use strict";n.r(t),n.d(t,"UserModule",(function(){return I}));var o=n("hGdz"),i=n("tyNb"),c=n("fXoL"),r=n("3Pt+"),a=n("6E1o"),s=n("HDdC");const l=e=>{const t=e.value,n=new FileReader;return s.a.create(e=>{n.addEventListener("loadend",()=>{const t=new Uint8Array(n.result).subarray(0,4);let o="",i=!1;for(let e=0;e<t.length;e++)o+=t[e].toString(16);switch(o){case"89504e47":i=!0;break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":i=!0;break;default:i=!1}e.next(i?null:{invalidMimeType:!0}),e.complete()}),n.readAsArrayBuffer(t)})};var u=n("3now"),b=n("0IaG"),d=n("dNgK"),g=n("ofXK"),m=n("NFeN"),p=n("bTqV"),f=n("b/j1");function h(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",15),c.Zb("click",(function(){return c.rc(e),c.dc(2).onStartEdit()})),c.Sb(1,"mat-icon"),c.Ac(2,"edit"),c.Rb(),c.Rb()}}function w(e,t){if(1&e&&(c.Sb(0,"div",23),c.Nb(1,"img",24),c.Rb()),2&e){const e=c.dc(3);c.Ab(1),c.ic("src",e.imagePreview,c.tc)("alt","User Photo")}}function S(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div"),c.Sb(1,"button",16),c.Zb("click",(function(){return c.rc(e),c.oc(8).click()})),c.Ac(2,"Select Photo"),c.Rb(),c.Sb(3,"button",17),c.Zb("click",(function(){return c.rc(e),c.dc(2).onCancelEdit()})),c.Ac(4,"Cancel"),c.Rb(),c.zc(5,w,2,2,"div",18),c.Sb(6,"form",19),c.Zb("ngSubmit",(function(){return c.rc(e),c.dc(2).onImageSave()})),c.Sb(7,"input",20,21),c.Zb("change",(function(t){return c.rc(e),c.dc(2).onImagePicked(t)})),c.Rb(),c.Sb(9,"button",22),c.Ac(10,"submit"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.dc(2);c.Ab(5),c.ic("ngIf",e.imagePreview&&""!=e.imagePreview&&e.imageForm.get("photo").valid),c.Ab(1),c.ic("formGroup",e.imageForm),c.Ab(3),c.ic("disabled",!e.imageForm.valid)}}function v(e,t){1&e&&(c.Sb(0,"div",25),c.Sb(1,"h6",26),c.Ac(2,"Please activate your account by clicking on the link sent to the email address you provided during sign up. Until then, you can only see the About, ToS and App Usage pages"),c.Rb(),c.Rb())}function y(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ul",27),c.Sb(1,"li",28),c.Sb(2,"span",29),c.Ac(3),c.Rb(),c.Ac(4,"users signed up with your link "),c.Rb(),c.Sb(5,"li",30),c.Sb(6,"span",29),c.Ac(7,"Recruitment link:"),c.Rb(),c.Sb(8,"code"),c.Ac(9),c.Rb(),c.Sb(10,"mat-icon",31),c.Zb("click",(function(){c.rc(e);const t=c.dc(2);return t.copyText(t.recruitmentLink+t.user.username)})),c.Ac(11,"content_copy"),c.Rb(),c.Rb(),c.Sb(12,"li",32),c.Ac(13," Share your Recruitment link with your friends so they can join and you get upgrade: "),c.Rb(),c.Sb(14,"li",33),c.Ac(15," Get 50 users to signup to get Pro account forever "),c.Rb(),c.Rb()}if(2&e){const e=c.dc(2);c.Ab(3),c.Bc(e.user.recruits||0),c.Ab(6),c.Bc(e.recruitmentLink+e.user.username)}}function M(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"div",3),c.Sb(2,"div",4),c.zc(3,h,3,0,"button",5),c.Nb(4,"img",6),c.zc(5,S,11,3,"div",7),c.Sb(6,"p"),c.Sb(7,"span"),c.Ac(8),c.Rb(),c.Rb(),c.Sb(9,"ul",8),c.Sb(10,"li"),c.Sb(11,"p",9),c.Sb(12,"mat-icon"),c.Ac(13,"email"),c.Rb(),c.Ac(14),c.Rb(),c.Rb(),c.Sb(15,"li"),c.Sb(16,"p",10),c.Sb(17,"mat-icon"),c.Ac(18,"account_box"),c.Rb(),c.Ac(19),c.Rb(),c.Rb(),c.Sb(20,"li"),c.Sb(21,"p",9),c.Sb(22,"mat-icon"),c.Ac(23,"group"),c.Rb(),c.Ac(24),c.ec(25,"strToDate"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(26,"div",11),c.Sb(27,"div",12),c.Sb(28,"h3"),c.Ac(29,"User Stats"),c.Rb(),c.zc(30,v,3,0,"div",13),c.zc(31,y,16,2,"ul",14),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.dc();c.Ab(3),c.ic("ngIf","unconfirmed"!=e.user.role),c.Ab(1),c.ic("src",e.user.photo,c.tc)("alt",e.user.username),c.Ab(1),c.ic("ngIf",e.editMode),c.Ab(3),c.Bc(e.user.username),c.Ab(6),c.Bc(e.user.email),c.Ab(5),c.Cc("",e.user.role," "),c.Ab(5),c.Bc(c.fc(25,10,e.user.createdAt)),c.Ab(6),c.ic("ngIf","unconfirmed"==e.user.role),c.Ab(1),c.ic("ngIf","unconfirmed"!=e.user.role)}}let P=(()=>{class e{constructor(e,t,n){this.userService=e,this.dialog=t,this._snackBar=n,this.recruitmentLink=`${window.location.protocol}//${window.location.hostname}/auth/register/`,this.editMode=!1,this.imagePicked=!1,this.durationInSeconds=3}ngOnInit(){this.getMyData(),this.imageForm=new r.i({photo:new r.f(null,{validators:[r.F.required],asyncValidators:[l]})})}getMyData(){this.userService.getUser().subscribe(e=>this.user=e)}copyText(e){let t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.openSnackBar()}onStartEdit(){this.editMode=!this.editMode}onCancelEdit(){this.editMode=!1,this.imagePicked=!1,this.imageForm.patchValue({photo:null}),this.imageForm.get("photo").updateValueAndValidity()}onImagePicked(e){const t=e.target.files[0];this.imageForm.patchValue({photo:t}),this.imageForm.get("photo").updateValueAndValidity();const n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(t)}onImageSave(){this.userService.uploadPhoto(this.imageForm.value.photo).subscribe(e=>{this.user.photo="https://bwr-img.s3.eu-west-3.amazonaws.com/users/"+e.photo}),this.imagePicked=!1,this.editMode=!1,this.imageForm.reset()}openSnackBar(){this._snackBar.openFromComponent(a.a,{duration:1e3*this.durationInSeconds,data:"Link Copied"})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(u.a),c.Mb(b.b),c.Mb(d.b))},e.\u0275cmp=c.Gb({type:e,selectors:[["ba-account"]],decls:2,vars:1,consts:[[1,"ba-content"],["class","w3-row",4,"ngIf"],[1,"w3-row"],[1,"w3-col","l4","m12","w3-container"],[1,"w3-card","w3-padding","user"],["mat-raised-button","","color","primary","class","edit",3,"click",4,"ngIf"],[1,"photo",3,"src","alt"],[4,"ngIf"],[1,"w3-ul","info"],[1,"w3-animate-right"],[1,"w3-animate-left"],[1,"w3-col","l8","m12","w3-container"],[1,"w3-card","w3-padding","user-stats"],["class","w3-panel w3-pale-yellow w3-border",4,"ngIf"],["class","w3-ul",4,"ngIf"],["mat-raised-button","","color","primary",1,"edit",3,"click"],["type","button","mat-stroked-button","","color","primary",1,"w3-margin",3,"click"],["type","button","mat-stroked-button","","color","accent",1,"w3-margin",3,"click"],["class","image-preview",4,"ngIf"],[1,"w3-animate-zoom",3,"formGroup","ngSubmit"],["type","file","accept","image/*",1,"file-input",3,"change"],["filePicker",""],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"image-preview"],[3,"src","alt"],[1,"w3-panel","w3-pale-yellow","w3-border"],[1,"w3-padding"],[1,"w3-ul"],[1,"w3-panel","w3-light-gray","w3-leftbar","w3-border-green","w3-animate-left"],[1,"w3-tag","w3-pale-green","w3-padding"],[1,"w3-panel","w3-light-gray","w3-leftbar","w3-border-green","w3-animate-right"],["title","Copy link",3,"click"],[1,"w3-panel","w3-padding","w3-pale-green","w3-leftbar","w3-border-green","w3-animate-left"],[1,"w3-panel","w3-padding","w3-pale-green","w3-leftbar","w3-border-green","w3-animate-right"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.zc(1,M,32,12,"div",1),c.Rb()),2&e&&(c.Ab(1),c.ic("ngIf",t.user))},directives:[g.t,m.a,p.b,r.H,r.s,r.j],pipes:[f.a],styles:["h3[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#54c479}p[_ngcontent-%COMP%]{color:#444;font-size:.8rem}.image-preview[_ngcontent-%COMP%]{height:10rem;width:10rem;margin:1rem auto}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.user[_ngcontent-%COMP%]{position:relative;text-align:center}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;color:#248e38}.user[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{position:relative;width:10rem;height:10rem;margin:1rem auto;border-radius:5rem;border:2px solid #afd91a;overflow:hidden}.user[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:none}.user[_ngcontent-%COMP%]:hover   .edit[_ngcontent-%COMP%]{display:block}.user-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.8rem}.user-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .w3-tag[_ngcontent-%COMP%], .user-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:500}mat-icon[_ngcontent-%COMP%]{position:absolute;font-size:1rem;top:.5rem;right:1rem;cursor:pointer}.info[_ngcontent-%COMP%]{border-top:1px solid #eee}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left;position:relative;padding-left:.4rem;color:#444;margin:0}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{top:.1rem;left:-1rem;color:#54c479;font-size:1rem;cursor:not-allowed}.file-input[_ngcontent-%COMP%]{width:0;height:0;overflow:hidden}.w3-panel[_ngcontent-%COMP%]{padding:0 1rem 0 0;margin:0}.w3-panel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})(),R=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["ba-user"]],decls:1,vars:0,template:function(e,t){1&e&&c.Nb(0,"ba-account")},directives:[P],styles:[""]}),e})();var A=n("qXBG");function C(e,t){1&e&&(c.Sb(0,"div"),c.Sb(1,"h1"),c.Ac(2,"User confirmed successfully"),c.Rb(),c.Sb(3,"a",2),c.Ac(4,"Go To my account"),c.Rb(),c.Rb())}function k(e,t){1&e&&(c.Sb(0,"div"),c.Sb(1,"h3"),c.Ac(2,"Your account could not be confirmed. Please try again with the link we sent you"),c.Rb(),c.Rb())}const O=[{path:":token",component:(()=>{class e{constructor(e,t){this.authService=e,this.route=t,this.token=null,this.token=this.route.snapshot.paramMap.get("token")}ngOnInit(){this.authService.confirmUser(this.token),setTimeout(()=>{this.confirmOK=this.authService.confirmOK},1400)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(A.a),c.Mb(i.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["ba-confirm-user"]],decls:3,vars:2,consts:[[1,"ba-content"],[4,"ngIf"],["href","http://localhost:4200/me"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.zc(1,C,5,0,"div",1),c.zc(2,k,3,0,"div",1),c.Rb()),2&e&&(c.Ab(1),c.ic("ngIf",t.confirmOK),c.Ab(1),c.ic("ngIf",!t.confirmOK))},directives:[g.t],styles:[""]}),e})()},{path:"",pathMatch:"full",component:R}];let _=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[i.h.forChild(O)],i.h]}),e})(),I=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[o.a,_]]}),e})()}}]);